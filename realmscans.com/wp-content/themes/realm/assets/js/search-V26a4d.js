function sf_addItem(e,a,l,s,t){var r=jQuery(e).find(".live-search_ajaxy-selective-item"),i=!1,c="",o=t.split(":"),c=2==o.length?o[0]:t;if(0<r.length)for(var n=0;n<r.length;n++)if(jQuery(r[n]).find("input.live-search_ajaxy-selective-close-hidden").val()==c){i=!0;break}if(i)return jQuery(e).find(".live-search_ajaxy-selective-input").val(""),void jQuery("#live-search_sb").hide();2==a.split(":").length&&(a=o[1]);l=jQuery('<span class="live-search_ajaxy-selective-item">'+a+'<a class="live-search_ajaxy-selective-close">X</a><input class="live-search_ajaxy-selective-close-hidden" type="hidden" name="'+l+'" value="'+c+'" /></span>');r.length<=0?jQuery(e).prepend(l):l.insertAfter(r[r.length-1]),l.click(function(){jQuery(this).remove()});e=jQuery(e).find(".live-search_ajaxy-selective-input");e&&(e.val(""),"array"!=s?e.css("visibility","hidden"):e.focus()),jQuery("#live-search_sb").hide()}!function(n){n.fn.extend({ajaxyLiveSearch:function(e,a){e=e&&"object"==typeof e?n.extend({},n.ajaxyLiveSearch.defaults,e):n.ajaxyLiveSearch.defaults,this.is("input")&&this.each(function(){new n.ajaxyLiveSearch.load(this,e,a)})}}),n.ajaxyLiveSearch={element:null,timeout:null,options:null,load:function(e,a,l){this.element=e,this.timeout=null,this.options=a,""==n(e).val()&&n(e).val(a.text),n(e).attr("autocomplete","off"),0==n("#live-search_sb").length&&n(".mainholder").append('<div id="live-search_sb" class="live-search_sb" style="position:absolute;display:none;width:'+a.width+'px;z-index:9999"><div class="live-search_sb_cont"><div class="live-search_sb_top"></div><div id="live-search_results" style="width:100%"><div id="live-search_val" ></div><div id="live-search_more"></div></div><div class="live-search_sb_bottom"></div></div></div>'),n.ajaxyLiveSearch.loadEvents(this)},loadResults:function(c){if(options=c.options,elem=c.element,window.sf_lastElement=elem,""!=jQuery(elem).val()){jQuery(".mainholder").data("live-search_results",null);var e='<li class="live-search_lnk live-search_more live-search_selected"><a id="live-search_loading" href="'+options.searchUrl.replace("%s",encodeURI(jQuery(elem).val()))+'"><i class="fa fa-spinner fa-spin"></i></a></li>';jQuery("#live-search_val").html("<ul>"+e+"</ul>");var a=this.bounds(elem,options),l=this.bounds(".bound",options);if(!a)return jQuery("#live-search_sb").hide(),!1;Math.ceil(l.left)+parseInt(options.width,10)>jQuery(window).width()&&jQuery("#live-search_sb").css("width",jQuery(window).width()-l.left-20),jQuery(".mainholder").hasClass("rtl")?jQuery("#live-search_sb").css({top:a.bottom,right:l.right}):jQuery("#live-search_sb").css({top:a.bottom,left:l.right}),jQuery("#live-search_sb").show();var s={action:"ts_ac_do_search",ts_ac_query:jQuery(elem).val()};if(options.ajaxData&&(s=window[options.ajaxData](s)),options.search){var t,r=options.search.split(","),i=[],e="",a=0;for(t in r){var o=r[t].split(":");2==o.length?0==o[1].indexOf(jQuery(elem).val())&&(i[i.length]=r[t]):1==o.length&&0==r[t].indexOf(jQuery(elem).val())&&(i[i.length]=r[t])}e+=(l=n.ajaxyLiveSearch.htmlArrayResults(i))[0],e=(e=(e=(e=(e+='<li class="live-search_lnk live-search_more'+(0==(a+=l[1])?" live-search_selected":"")+'">{total} </li>').replace(/{search_value_escaped}/g,jQuery(elem).val())).replace(/{search_url_escaped}/g,options.searchUrl.replace("%s",encodeURI(jQuery(elem).val())))).replace(/{search_value}/g,jQuery(elem).val())).replace(/{total}/g,a),jQuery(".mainholder").data("live-search_results",i),jQuery("#live-search_val").html("<ul>"+e+"</ul>"),n.ajaxyLiveSearch.loadLiveEvents(c),jQuery("#live-search_sb").show()}else jQuery.post(options.ajaxUrl,s,function(e){var a,l=JSON.parse(e),s="",t=0;for(a in l){var r,i;for(i in l[a])s+=(r=n.ajaxyLiveSearch.htmlResults(l[a][i],a,i))[0],t+=r[1]}0==t?s+='<li class="live-search_lnk live-search_more"></li>':(options.callback||(s+='<li class="live-search_lnk live-search_more">'+sf_templates+"</li>"),s=(s=s.replace(/{search_value_escaped}/g,jQuery(elem).val())).replace(/{search_url_escaped}/g,options.searchUrl.replace("%s",encodeURI(jQuery(elem).val())))),jQuery(".mainholder").data("live-search_results",l),jQuery("#live-search_val").html('<ul class="live-search_main">'+s+"</ul>"),n.ajaxyLiveSearch.loadLiveEvents(c),jQuery("#live-search_sb").show()})}else jQuery("#live-search_sb").hide()},bounds:function(e,a){var l=jQuery(e).offset();if(l)return{top:l.top,left:l.left+a.leftOffset,bottom:l.top+jQuery(e).innerHeight()+a.topOffset,right:l.left-jQuery("#live-search_sb").innerWidth()+jQuery(e).innerWidth()}},htmlResults:function(e,a,l){var s="",t=0;if(void 0!==e&&0<e.all.length){s+='<li class="live-search_header">'+e.title+'</li><li><div class="live-search_result_container"><ul>';for(var r=0;r<e.all.length;r++)t++,s+="<li result-type='object' index-type='"+a+"' index-array='"+l+"' index='"+r+"' class=\"live-search_lnk "+e.class_name+'">'+n.ajaxyLiveSearch.replaceResults(e.all[r],e.template)+"</li>";s+="</ul></div></li>"}return new Array(s,t)},htmlArrayResults:function(e){var a="",l=0;if(void 0!==e&&0<e.length){a+='<li><div class="live-search_result_container"><ul>';for(var s=0;s<e.length;s++){var t=e[s].split(":");l++,a+="<li result-type='array' index='"+s+"' class=\"live-search_lnk live-search_category\"><a href='javascript:;'>"+(2==t.length?t[1]:e[s])+"</a></li>"}a+="</ul></div></li>"}return new Array(a,l)},replaceResults:function(e,a){for(var l in e)a=a.replace(new RegExp("{"+l+"}","g"),e[l]);return a},loadLiveEvents:function(e){var a={object:e};jQuery("#live-search_val li.live-search_lnk").mouseover(function(){jQuery(".live-search_lnk").each(function(){jQuery(this).attr("class",jQuery(this).attr("class").replace(" live-search_selected",""))}),jQuery(this).attr("class",jQuery(this).attr("class")+" live-search_selected")}),a.object.options.callback&&jQuery("#live-search_val li.live-search_lnk").click(function(e){try{window[a.object.options.callback](a.object,this)}catch(e){alert(e)}return!1})},loadEvents:function(e){var i={object:e};jQuery(document).click(function(){jQuery("#live-search_sb").hide()}),jQuery(window).resize(function(){var e=n.ajaxyLiveSearch.bounds(window.sf_lastElement,i.object.options);e&&jQuery("#live-search_sb").css({top:e.bottom,left:e.left})}),jQuery(e.element).keyup(function(e){var a;"38"!=e.keyCode&&"40"!=e.keyCode&&"13"!=e.keyCode&&"27"!=e.keyCode&&"39"!=e.keyCode&&"37"!=e.keyCode&&(null!=(e=i.object).timeout&&clearTimeout(e.timeout),jQuery(e.element).attr("class",jQuery(e.element).attr("class").replace(" live-search_focused","")+" live-search_focused"),a={object:i.object},e.timeout=setTimeout(function(){jQuery.ajaxyLiveSearch.loadResults(a.object)},i.object.options.delay))}),jQuery(window).keydown(function(e){if("none"!=jQuery("#live-search_sb").css("display")&&"undefined"!=jQuery("#live-search_sb").css("display")&&0<jQuery("#live-search_sb").length)if("38"==e.keyCode||"40"==e.keyCode){jQuery.browser.webkit&&jQuery("#live-search_sb").focus();var a=!1,l=jQuery("#live-search_val li.live-search_lnk"),s=!1;e.stopPropagation(),e.preventDefault();for(var t=0;t<l.length;t++)0<=jQuery(l[t]).attr("class").indexOf("live-search_selected")&&0==s?(a=!0,t<l.length-1&&"40"==e.keyCode?(jQuery(l[t]).attr("class",jQuery(l[t]).attr("class").replace(" live-search_selected","")),jQuery(l[t+1]).attr("class",jQuery(l[t+1]).attr("class")+" live-search_selected"),t+=1,s=!0):0<t&&"38"==e.keyCode&&(jQuery(l[t]).attr("class",jQuery(l[t]).attr("class").replace(" live-search_selected","")),jQuery(l[t-1]).attr("class",jQuery(l[t-1]).attr("class")+" live-search_selected"),t+=1,s=!0)):jQuery(l[t]).attr("class",jQuery(l[t]).attr("class").replace(" live-search_selected",""));0==a&&0<l.length&&jQuery(l[0]).attr("class",jQuery(l[0]).attr("class")+" live-search_selected")}else if(27==e.keyCode)jQuery("#live-search_sb").hide();else if(13==e.keyCode){var r=jQuery("#live-search_val li.live-search_selected a").attr("href");return void 0!==r&&""!=r?i.object.options.callback?i.object.options.callback(this):window.location.href=r:i.object.options.callback?i.object.options.callback(this):null!=i.object.element&&(window.location.href=sf_url.replace("%s",encodeURI(jQuery(i.object).val()))),!1}}),jQuery(e.element).focus(function(){jQuery(this).val()==i.object.options.text&&(jQuery(this).val(""),jQuery(this).attr("class",jQuery(this).attr("class")+" live-search_focused")),0<i.object.options.expand&&jQuery(i.object.element).animate({width:i.object.options.iwidth})}),jQuery(e.element).blur(function(){""==jQuery(this).val()&&(jQuery(this).val(i.object.options.text),jQuery(this).attr("class",jQuery(this).attr("class").replace(/ sf_focused/g,""))),0<i.object.options.expand&&jQuery(i.object.element).animate({width:i.object.options.expand})})}},n.ajaxyLiveSearch.defaults={delay:500,leftOffset:0,topOffset:5,text:"Search For",iwidth:180,width:215,ajaxUrl:"",ajaxData:!1,searchUrl:"",expand:!1,callback:!1,search:!1}}(jQuery);